@model Sciendo.Index.Web.Models.IndexModel
@{
    ViewBag.Title = "Home Page";
}
@section styles
{
    @Styles.Render("~/Content/autocomplete")
}
<h3>Actions</h3>
<div class="ui-widget">
    <label for="musicIndexFromPath">Music Index From Path:</label>
    <input data-bind="value:musicFromPath" type="search" name="musicIndexFromPath" data-autocomplete="@Url.Action("GetMusicAutocomplete", "Home")" />
    <button data-bind="click:indexMusic">Go</button>
</div>
<div class="ui-widget">
    <label for="lyricsIndexFromPath">Lyrics Index From Path:</label>
    <input data-bind="value:lyricsFromPath" type="search" name="lyricsIndexFromPath" data-autocomplete="@Url.Action("GetLyricsAutocomplete", "Home")" />
    <button data-bind="click:indexLyrics">Go</button>
</div>
<div data-bind="if:indexedOccured">
    <label id="resultsIndexed" data-bind="text:indexingResultMessage"></label>
    <div class="validation-summary-errors" data-bind="if:indexedWithError"></div>
    <label id="errorIndexed" data-bind="text:indexingError"></label>
</div>
<h3>Monitoring</h3>
<div class="container">
    <ul id="messages" data-bind="foreach: monitoringMessages">
        <li data-bind="text: $data"></li>
    </ul>
</div>
    @section scripts
    {
        @Scripts.Render("~/bundles/signalR")
        <!--Reference the autogenerated SignalR hub script. -->
        <script src="~/signalr/hubs"></script>

        @Scripts.Render("~/bundles/jqueryui")
        @Scripts.Render("~/bundles/index")
        <script>
            // Initiate the Knockout bindings
            var vm = new indexViewModel("@Server.HtmlEncode(@Model.SourceFolders.Music)","@Server.HtmlEncode(@Model.SourceFolders.Lyrics)");
            ko.applyBindings(vm);

            $.connection.hub.start().done(function () { vm.init(); });

        </script>
    }
